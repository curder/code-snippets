import{_ as a,c as i,o as e,ae as n}from"./chunks/framework.DaBiusyf.js";const d=JSON.parse('{"title":"Composer 镜像","description":"","frontmatter":{},"headers":[],"relativePath":"programming-language/php/composer-mirrors.md","filePath":"programming-language/php/composer-mirrors.md","lastUpdated":1706240946000}'),p={name:"programming-language/php/composer-mirrors.md"};function t(l,s,h,o,r,k){return e(),i("div",null,s[0]||(s[0]=[n(`<h1 id="composer-镜像" tabindex="-1">Composer 镜像 <a class="header-anchor" href="#composer-镜像" aria-label="Permalink to &quot;Composer 镜像&quot;">​</a></h1><p>由于默认情况下执行 composer 各种命令是去国外的 composer 官方镜像源获取需要安装的具体软件信息，所以在不使用代理的情况下，从国内访问国外服务器的速度相对比较慢。</p><h2 id="基本命令" tabindex="-1">基本命令 <a class="header-anchor" href="#基本命令" aria-label="Permalink to &quot;基本命令&quot;">​</a></h2><p>镜像的基本操作，包括查看镜像、设置镜像和取消镜像等。</p><h3 id="查看镜像" tabindex="-1">查看镜像 <a class="header-anchor" href="#查看镜像" aria-label="Permalink to &quot;查看镜像&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -gl</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 查看全局镜像配置</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -l</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 查看当前项目镜像配置</span></span></code></pre></div><h3 id="设置镜像" tabindex="-1">设置镜像 <a class="header-anchor" href="#设置镜像" aria-label="Permalink to &quot;设置镜像&quot;">​</a></h3><ul><li><p>命令行模式</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo.packagist</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.aliyun.com/composer/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> # 配置全局镜像</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repo.packagist</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.aliyun.com/composer/</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> #  配置当前项目镜像</span></span></code></pre></div></li><li><p>修改 <code>composer.json</code> 文件</p><div class="language-json vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">json</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">{</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    &quot;repositories&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:[</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        {</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;description&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;阿里云镜像&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;type&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;composer&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;url&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&quot;https://mirrors.aliyun.com/composer/&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">            &quot;canonical&quot;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">false</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">        }</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    ]</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><blockquote><p>配置阿里云和官方两个源，阿里云镜像站下载文件出错时再从官方源上下载。</p></blockquote></li></ul><h3 id="取消镜像" tabindex="-1">取消镜像 <a class="header-anchor" href="#取消镜像" aria-label="Permalink to &quot;取消镜像&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 全局配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -g</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --unset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repos.packagist</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 当前项目配置</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> config</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --unset</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> repos.packagist</span></span></code></pre></div><p>取消镜像后，默认使用官方源 <code>https://repo.packagist.org</code>。</p><h2 id="相关命令" tabindex="-1">相关命令 <a class="header-anchor" href="#相关命令" aria-label="Permalink to &quot;相关命令&quot;">​</a></h2><h3 id="下载-composer-命令行工具" tabindex="-1">下载 <code>composer</code> 命令行工具 <a class="header-anchor" href="#下载-composer-命令行工具" aria-label="Permalink to &quot;下载 \`composer\` 命令行工具&quot;">​</a></h3><div class="vp-code-group vp-adaptive-theme"><div class="tabs"><input type="radio" name="group-16BIk" id="tab-IPmh1_T" checked><label data-title="阿里云" for="tab-IPmh1_T">阿里云</label><input type="radio" name="group-16BIk" id="tab-JxGk2Kd"><label data-title="腾讯云" for="tab-JxGk2Kd">腾讯云</label></div><div class="blocks"><div class="language-bash vp-adaptive-theme active"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 下载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.aliyun.com/composer/composer.phar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 赋权</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer.phar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer.phar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/composer</span></span></code></pre></div><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 1. 下载</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">wget</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> https://mirrors.tencent.com/composer/composer.phar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 2. 赋权</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">chmod</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> +x</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer.phar</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 3. 安装</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">mv</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> composer.phar</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> /usr/local/bin/composer</span></span></code></pre></div></div></div><h3 id="调试" tabindex="-1">调试 <a class="header-anchor" href="#调试" aria-label="Permalink to &quot;调试&quot;">​</a></h3><p><code>composer</code> 命令安装扩展包时增加 <code>-vvv</code> 可输出详细的信息，可以查看配置的镜像是否生效，命令如下：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> require</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> alibabacloud/sdk</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> -vvv</span></span></code></pre></div><h3 id="诊断" tabindex="-1">诊断 <a class="header-anchor" href="#诊断" aria-label="Permalink to &quot;诊断&quot;">​</a></h3><p>使用下面的命令可以诊断系统以识别常见错误：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> diagnose</span></span></code></pre></div><h3 id="更新-composer-版本" tabindex="-1">更新 <code>composer</code> 版本 <a class="header-anchor" href="#更新-composer-版本" aria-label="Permalink to &quot;更新 \`composer\` 版本&quot;">​</a></h3><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更新到最新版</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> self-update</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更新到1.x版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> self-update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --1</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"># 更新到指定版本</span></span>
<span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> self-update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> 2.5.4</span></span></code></pre></div><p>更多版本可以查看官方地址：<a href="https://getcomposer.org/download/" target="_blank" rel="noreferrer">composer download</a></p><h3 id="更新-composer-lock-源" tabindex="-1">更新 composer.lock 源 <a class="header-anchor" href="#更新-composer-lock-源" aria-label="Permalink to &quot;更新 composer.lock 源&quot;">​</a></h3><p>若项目之前已通过其他源安装，则需要更新 <code>composer.lock</code> 文件，执行命令：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> update</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> --lock</span></span></code></pre></div><h3 id="清除缓存" tabindex="-1">清除缓存 <a class="header-anchor" href="#清除缓存" aria-label="Permalink to &quot;清除缓存&quot;">​</a></h3><p>通过下面的命令可以清除缓存：</p><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">composer</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> clear-cache</span></span></code></pre></div><h2 id="国内镜像地址" tabindex="-1">国内镜像地址 <a class="header-anchor" href="#国内镜像地址" aria-label="Permalink to &quot;国内镜像地址&quot;">​</a></h2><h3 id="阿里云" tabindex="-1">阿里云 <a class="header-anchor" href="#阿里云" aria-label="Permalink to &quot;阿里云&quot;">​</a></h3><p>镜像地址：<code>https://mirrors.aliyun.com/composer/</code></p><p>文档地址：<a href="https://developer.aliyun.com/composer" target="_blank" rel="noreferrer">aliyun composer mirror</a></p><blockquote><p>实时同步自 <a href="https://packagist.org/mirrors" target="_blank" rel="noreferrer">Packagist 官方</a></p></blockquote><h3 id="腾讯云" tabindex="-1">腾讯云 <a class="header-anchor" href="#腾讯云" aria-label="Permalink to &quot;腾讯云&quot;">​</a></h3><p>镜像地址：<code>https://mirrors.tencent.com/composer/</code></p><p>文档地址：<a href="https://mirrors.cloud.tencent.com/help/composer.html" target="_blank" rel="noreferrer">tencent composer mirror</a></p><blockquote><p>同步频率为每天一次，同步的时间为凌晨0点-2点。</p></blockquote><h3 id="上海交通大学" tabindex="-1">上海交通大学 <a class="header-anchor" href="#上海交通大学" aria-label="Permalink to &quot;上海交通大学&quot;">​</a></h3><p>镜像地址: <code>https://packagist.mirrors.sjtug.sjtu.edu.cn/</code></p><p>文档地址：<a href="https://packagist.mirrors.sjtug.sjtu.edu.cn/" target="_blank" rel="noreferrer">sjtu composer mirror</a></p><blockquote><p>更新频率为 每 4800 秒从 <a href="https://packagist.org/mirrors" target="_blank" rel="noreferrer">packagist.org</a> 同步一次。</p></blockquote>`,42)]))}const g=a(p,[["render",t]]);export{d as __pageData,g as default};
